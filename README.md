# Link-Shortener App

## Application Description:
RESTful API application that generates short links for provided URLs. When a user opens a short link generated by the application, they should be redirected to the original link.
<br>The application also collects statistics on the usage of short links and prepares overall link ratings.

### Technical requirements:
1. Link Generator:
   - **Endpoint:** The `/generate` endpoint should process a POST request containing the original link and generate a short link.

   - **Request Format:** The original link is passed in the body of the POST request in the **"original"** field of the JSON object.

   - **Response Format:** The generated short link is passed in the response body in the **"link"** field of the JSON object.

   - **Short Link Format:** The generated short link must have the `/l/{some-short-name}` format (it must not contain the server address).

Request:
```json
     {
        "original": "https://xxxx-xxxx.com/some/url?param=1"
     }
```
Response:
```json
     { 
        "link": "/l/some-short-name"
     }
```

2. Redirection

   - **Resource:** The resource `/l/{some-short-name}` should redirect to the original URL.

   - **Request Path Parameters:** `{some-short-name}` - link identifier

   - **Request Example:** Request example: **GET** `/l/some-short-name`


3. Statistics for Specific Links

   - **Resource:** The resource `/stats/{some-short-name}` must process a GET request and return statistics of clicks on a specific link.

   - **Request Path Parameters:** `{some-short-name}` - link identifier

   - **Service Response:** The service response must contain a JSON object with the following fields:
      - `link` - generated short link
      - `original` - original link
      - `rank` - place of the link in the top of requests
      - `count` - number of requests for a short link

   - **Request Example:** Request example: **GET** `/stats/some-short-name`
```json
{
    "link": "/l/some short name",
    "source": "https://xxxx-xxxx.com/some/url?param=1"
    "rank": 1,
    "count": 100500
}
```
4. Link Rating
   - The `/stats` endpoint must process the **GET** request and return statistics sorted by the usage counter in descending order.

   - **Request Parameters:**
      - `page` - page number
      - `count` - the number of records displayed on the page, with a maximum value of 100 (inclusive)

   - The service response must contain an array of JSON objects described in section 3.1 (Statistics on specific links).

   - **Request Example:** Request example: **GET** `/stats?page=1&count=2`
```json
[
   {
      "link": "/l/some-short-name",
      "original": "https://xxxx-xxxx.com/some/url?param=1"
      "rank": 1,
      "count": 100500
   },
   {
      "link": "/l/some-another-short-name",
      "original": "https://xxxx-xxxx.xxx.com/some/url?page=1&size=40"
      "rank": 2,
      "count": 40000
   }
]
```

### Technologies used:
- Java 18
- Spring Boot, Spring Data JPA
- Mockito + JUnit
- PostgreSQL
- Swagger

## Getting Started
Follow these steps to run the Link-Shortener application on your local machine:

1) #### Clone the Repository
   Clone git repository to your local machine by running the following command in your terminal:
`git clone https://github.com/nozzi325/LinkShortener`
2) #### Set Environment Variables
   Create an `.env` file in the project's root directory to configure your database connection. You can set the `DB_USER`and `DB_PASSWORD` variables in this file. <br>Alternatively, you can update the `docker-compose.yml` file with the appropriate values for your database.

3) #### Start the Application
   Use Docker Compose to start the application and its dependencies. Run the following command:
   `docker-compose up`
4) #### Access the Endpoints
   Once the application is up and running, you can access the API endpoints and Swagger documentation by opening your web browser and navigating to:<br>
   http://localhost:8080/swagger-ui.html <br>
   Here, you will find a list of available endpoints, along with their descriptions and request/response examples.

## Endpoints

1) `POST /generate`
    - Request:
      ![generate_request](https://user-images.githubusercontent.com/57872183/203131521-bd413f29-a384-4bc4-a3c3-ae1ab3dffce6.png)
    - Response:
      ![generate_response](https://user-images.githubusercontent.com/57872183/203131546-fa236f54-9066-4706-bed5-18960fc35437.png)

2) `GET /l/{short-link}`
    - Request:
      ![redirect_request](https://user-images.githubusercontent.com/57872183/203132087-271214d3-cb66-41da-b5d5-aecf325d9bf1.png)
    - Response:
      ![redirect_response](https://user-images.githubusercontent.com/57872183/203132107-3c961b23-bc10-495a-a21f-ea5283548eb6.png)

3) `GET /stats/{short-link}`
    - Request:
      ![stats_request](https://user-images.githubusercontent.com/57872183/203132737-cf747c70-1bac-4375-9c66-51f67fa8b1a9.png)
    - Response:
      ![stats_response](https://user-images.githubusercontent.com/57872183/203132753-647b76c5-bb43-4de8-bf23-fc0e24ea9791.png)

4) `GET /stats/page=1&count=5`
    - Request:
      ![total_stats_request](https://user-images.githubusercontent.com/57872183/203133170-f006e380-79c1-41ba-b77a-24824e48256f.png)
    - Response:
      ![total_stats_response](https://user-images.githubusercontent.com/57872183/203133202-f1da16e0-5a85-4e34-93bc-1065cb55e358.png)
